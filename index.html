<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Report.AI</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1 class="brand-title">Report.AI</h1>
            <div class="header-controls">
                <div class="theme-toggle">
                    <button type="button" data-theme="light" class="theme-btn active">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg>
                        Light
                    </button>
                    <button type="button" data-theme="dark" class="theme-btn">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                        </svg>
                        Dark
                    </button>
                </div>
                <button type="button" class="reset-btn" id="clear-reset-btn">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path>
                        <path d="M3 3v5h5"></path>
                    </svg>
                    Clear & Reset
                </button>
            </div>
        </header>
        
        <main>
            <!-- Progress Indicator -->
            <div class="progress-container">
                <div class="progress-steps">
                    <div class="progress-line-container">
                        <div class="progress-line"></div>
                        <div class="progress-line-fill"></div>
                    </div>
                    <div class="progress-step active" data-step="1">
                        <div class="step-number">1</div>
                        <span class="step-label">Campaign Data</span>
                    </div>
                    <div class="progress-step" data-step="2">
                        <div class="step-number">2</div>
                        <span class="step-label">Company Info</span>
                    </div>
                    <div class="progress-step" data-step="3">
                        <div class="step-number">3</div>
                        <span class="step-label">Time Range</span>
                    </div>
                    <div class="progress-step" data-step="4">
                        <div class="step-number">4</div>
                        <span class="step-label">Performance Data</span>
                    </div>
                    <div class="progress-step" data-step="5">
                        <div class="step-number">5</div>
                        <span class="step-label">AI Analysis</span>
                    </div>
                </div>
            </div>

            <!-- Step 1: Campaign Data -->
            <section class="report-container step-section" id="step-campaign-data">
                <div class="section-header">
                    <div class="step-indicator">1</div>
                    <h2>Campaign Data</h2>
                    <div class="section-status">
                        <span class="status-indicator" id="campaign-status">Step Pending</span>
                    </div>
                </div>
                
                <div class="section-content">
                    <div class="form-description">
                        <p>Enter your Lumina campaign URL to fetch order data and line items for analysis.</p>
                        <!-- <div class="demo-notice">
                            <p><strong>Try Demo Mode:</strong> Enter "demo" to see a sample workflow with test data.</p>
                        </div> -->
                    </div>
                    
                    <div class="input-group">
                        <input 
                            type="text" 
                            id="campaign-url" 
                            class="url-input" 
                            placeholder="Enter Lumina URL, order ID, or 'demo' (e.g., https://townsquarelumina.com/lumina/view/order/6774742077ff89a87f05af9c)"
                            aria-label="Campaign URL"
                        >
                        <button type="button" class="generate-btn" id="fetch-campaign-btn">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="11" cy="11" r="8"></circle>
                                <path d="m21 21-4.35-4.35"></path>
                            </svg>
                            Fetch Order
                        </button>
                    </div>
                    
                    <div class="loading-state hidden" id="campaign-loading">
                        <div class="spinner"></div>
                        <p>Fetching campaign data...</p>
                    </div>
                    
                    <div class="output-content hidden" id="campaign-results">
                        <h3>Campaign Summary</h3>
                        <div class="campaign-info">
                            <div class="info-grid">
                                <div class="info-item">
                                    <span class="label">Company:</span>
                                    <span class="value" id="campaign-company">--</span>
                                </div>
                                <div class="info-item">
                                    <span class="label">Wide Orbit Number:</span>
                                    <span class="value" id="campaign-id">--</span>
                                </div>
                                <div class="info-item">
                                    <span class="label">Order Dates:</span>
                                    <span class="value" id="campaign-dates">--</span>
                                </div>
                                <div class="info-item">
                                    <span class="label">Status:</span>
                                    <span class="value status-chip" id="campaign-status-value">--</span>
                                </div>
                            </div>
                        </div>
                        
                        <h4 id="tactics-heading">Discovered Line Items: <span id="line-items-count">0</span></h4>
                        <p class="form-description">Remove unneeded tactics with the X on each chip.</p>
                        <div class="tactics-grid" id="detected-tactics">
                            <!-- Dynamically populated -->
                        </div>
                        
                        <div class="section-actions">
                            <button type="button" class="generate-btn" id="continue-to-company">
                                Continue to Company Information
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="m9 18 6-6-6-6"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Step 2: Company Information -->
            <section class="report-container step-section hidden" id="step-company-info">
                <div class="section-header">
                    <div class="step-indicator">2</div>
                    <h2>Company Information</h2>
                    <div class="section-status">
                        <span class="status-indicator" id="company-status">Step Pending</span>
                    </div>
                </div>
                
                <div class="section-content">
                    <div class="form-description">
                        <p>Configure company details to enhance the analysis context. Start by pasting a research URL to auto-fill company information.</p>
                    </div>
                    
                    <!-- Market Research Context - Moved to top -->
                    <div class="form-field priority-field">
                        <label for="market-research-url">Market Research Context (Optional)</label>
                        <p class="form-description">Paste a research URL to automatically fetch company context, industry insights, and competitor analysis. This will auto-fill the fields below.</p>
                        <div class="api-input-container">
                            <input type="url" id="market-research-url" class="styled-input" placeholder="https://ignite.edwinlovett.com/research/?company=example.com">
                            <div class="api-status-icon" id="api-status-icon">
                                <svg class="icon loading-icon hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"></path>
                                </svg>
                                <svg class="icon success-icon hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M20 6L9 17l-5-5"></path>
                                </svg>
                                <svg class="icon error-icon hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <path d="M15 9l-6 6M9 9l6 6"></path>
                                </svg>
                            </div>
                        </div>
                        <button type="button" class="api-context-btn hidden" id="view-research-context">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                <circle cx="12" cy="12" r="3"></circle>
                            </svg>
                            View & Edit Research Context
                        </button>
                    </div>
                    
                    <!-- Company Information Fields -->
                    <div class="form-grid two-column">
                        <div class="form-field">
                            <label for="company-name">Company Name</label>
                            <input type="text" id="company-name" class="styled-input" placeholder="Enter company name">
                        </div>
                        
                        <div class="form-field">
                            <label for="industry">Industry (Optional)</label>
                            <div class="searchable-select-container">
                                <input type="text" id="industry-search" class="styled-input searchable-input" placeholder="Search or type industry...">
                                <div class="searchable-dropdown hidden" id="industry-dropdown">
                                    <div class="dropdown-options" id="industry-options">
                                        <!-- Dynamically populated options -->
                                    </div>
                                    <div class="dropdown-add-new" id="add-new-industry">
                                        <button type="button" class="add-new-btn">
                                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <line x1="12" y1="5" x2="12" y2="19"></line>
                                                <line x1="5" y1="12" x2="19" y2="12"></line>
                                            </svg>
                                            Add "<span class="new-industry-text"></span>" as new industry
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <input type="hidden" id="industry" name="industry">
                        </div>
                    </div>
                    
                    <div class="form-field">
                        <label for="campaign-goals">Campaign Goals (Optional)</label>
                        <textarea id="campaign-goals" class="styled-textarea" rows="3" placeholder="Describe the main objectives of this campaign..."></textarea>
                    </div>
                    
                    <div class="form-field">
                        <label for="additional-notes">Additional Notes</label>
                        <p class="form-description">Any additional context, requirements, or notes about this campaign</p>
                        <textarea id="additional-notes" class="styled-textarea" rows="4" placeholder="Enter any additional information..."></textarea>
                    </div>
                    
                    <div class="section-actions">
                        <button type="button" class="generate-btn secondary" id="back-to-campaign">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="m15 18-6-6 6-6"></path>
                            </svg>
                            Back
                        </button>
                        <button type="button" class="generate-btn" id="continue-to-timerange">
                            Continue to Time Range
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="m9 18 6-6-6-6"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            </section>

            <!-- Step 3: Analysis Time Range -->
            <section class="report-container step-section hidden" id="step-time-range">
                <div class="section-header">
                    <div class="step-indicator">3</div>
                    <h2>Analysis Time Range</h2>
                    <div class="section-status">
                        <span class="status-indicator" id="timerange-status">Step Pending</span>
                    </div>
                </div>
                
                <div class="section-content">
                    <div class="form-description">
                        <p>Select the time period for your campaign analysis. Choose from preset ranges or select custom dates.</p>
                    </div>
                    
                    <!-- Time Range Cards -->
                    <div class="time-range-grid">
                        <div class="time-card" data-range="last-month">
                            <div class="days">Last</div>
                            <div class="label">Month</div>
                        </div>
                        <div class="time-card" data-range="this-month">
                            <div class="days">This</div>
                            <div class="label">Month</div>
                        </div>
                        <div class="time-card" data-range="30">
                            <div class="days">30</div>
                            <div class="label">Days</div>
                        </div>
                        <div class="time-card" data-range="90">
                            <div class="days">90</div>
                            <div class="label">Days</div>
                        </div>
                        <div class="time-card" data-range="120">
                            <div class="days">120</div>
                            <div class="label">Days</div>
                        </div>
                        <div class="time-card" data-range="150">
                            <div class="days">150</div>
                            <div class="label">Days</div>
                        </div>
                        <div class="time-card" data-range="180">
                            <div class="days">180</div>
                            <div class="label">Days</div>
                        </div>
                        <div class="time-card" data-range="custom">
                            <div class="days">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                    <line x1="16" y1="2" x2="16" y2="6"></line>
                                    <line x1="8" y1="2" x2="8" y2="6"></line>
                                    <line x1="3" y1="10" x2="21" y2="10"></line>
                                </svg>
                            </div>
                            <div class="label">Custom Range</div>
                        </div>
                    </div>
                    
                    <!-- Date Inputs (Always Visible) -->
                    <div class="date-inputs-section" id="date-inputs-section">
                        <div class="form-grid">
                            <div class="form-field">
                                <label for="start-date">Start Date</label>
                                <input type="date" id="start-date" class="styled-input">
                            </div>
                            <div class="form-field">
                                <label for="end-date">End Date</label>
                                <input type="date" id="end-date" class="styled-input">
                            </div>
                        </div>
                    </div>
                    
                    <div class="date-summary" id="date-summary">
                        <p>Current Date: <span id="current-date-time">--</span></p>
                        <p>Selected Range: <span id="selected-range">No range selected</span></p>
                        <p>Duration: <span id="range-duration">0 days</span></p>
                    </div>
                    
                    <div class="section-actions">
                        <button type="button" class="generate-btn secondary" id="back-to-company">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="m15 18-6-6 6-6"></path>
                            </svg>
                            Back
                        </button>
                        <button type="button" class="generate-btn" id="continue-to-performance">
                            Continue to Performance Data
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="m9 18 6-6-6-6"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            </section>

            <!-- Step 4: Performance Tables by Tactic -->
            <section class="report-container step-section hidden" id="step-performance-data">
                <div class="section-header">
                    <div class="step-indicator">4</div>
                    <h2>Performance Tables by Tactic</h2>
                    <div class="section-status">
                        <span class="status-indicator" id="performance-status">Step Pending</span>
                    </div>
                </div>
                
                <div class="section-content">
                    <div class="form-description">
                        <p>Upload performance data files for each detected tactic.</p>
                    </div>
                    
                    <div class="upload-progress-summary">
                        <div class="progress-info">
                            <span>Files uploaded: <span id="files-uploaded">0</span> / <span id="files-total">0</span></span>
                            <div class="upload-progress-bar">
                                <div class="upload-progress-fill" id="upload-progress-fill" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid-layout" id="file-uploads">
                        <!-- Dynamically populated based on detected tactics -->
                    </div>
                    
                    <div class="section-actions">
                        <button type="button" class="generate-btn secondary" id="back-to-timerange">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="m15 18-6-6 6-6"></path>
                            </svg>
                            Back
                        </button>
                        <button type="button" class="generate-btn disabled" id="continue-to-analysis" disabled>
                            Continue to AI Analysis
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="m9 18 6-6-6-6"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            </section>

            <!-- Step 5: AI Analysis Configuration -->
            <section class="report-container step-section hidden" id="step-ai-analysis">
                <div class="section-header">
                    <div class="step-indicator">5</div>
                    <h2>AI Analysis Configuration</h2>
                    <div class="section-status">
                        <span class="status-indicator" id="analysis-status">Step Pending</span>
                    </div>
                </div>
                
                <div class="section-content">
                    <div class="form-description">
                        <p>Customize how the AI analyzes your campaign data</p>
                    </div>
                    
                    <!-- AI Model Selection -->
                    <div class="form-field">
                        <label for="ai-model">AI Model</label>
                        <div class="model-dropdown-container">
                            <select id="ai-model" class="model-select">
                                <option value="gemini-2.5-pro">Gemini 2.5 Pro</option>
                                <option value="claude-opus-4-1-20250805">Claude Opus 4.1</option>
                                <option value="claude-sonnet-4-20250514" selected>Claude Sonnet 4</option>
                                <option value="claude-3-7-sonnet-20250219">Claude 3.7 Sonnet</option>
                                <option value="gpt-5-2025-08-07">ChatGPT 5</option>
                            </select>
                            <div class="model-badge-container">
                                <span id="current-model-badge" class="model-badge claude">Claude Sonnet 4</span>
                            </div>
                        </div>
                        <div class="model-description" id="model-description">Advanced reasoning with balanced performance and speed. Excellent for comprehensive business analysis.</div>
                    </div>
                    
                    <!-- Temperature Slider -->
                    <div class="form-field">
                        <div class="temp-label-container">
                            <label for="temp-slider">Analysis Creativity (Temperature)</label>
                            <span id="temp-label" class="temp-label balanced">Balanced</span>
                        </div>
                        <div class="slider-container">
                            <div class="slider-wrapper">
                                <input type="range" id="temp-slider" class="temperature-slider" min="0" max="1" step="0.1" value="0.5">
                                <div class="slider-tick balanced-tick" title="0.5 - Balanced"></div>
                            </div>
                            <span id="temp-value" class="temp-value">0.5</span>
                        </div>
                        <div class="slider-labels">
                            <span>0.0 - Deterministic</span>
                            <span>0.5 - Balanced</span>
                            <span>1.0 - Creative</span>
                        </div>
                        <div class="temp-description" id="temp-description">Balanced approach with consistent insights</div>
                    </div>
                    
                    <!-- Tone & Style Selection -->
                    <div class="form-field">
                        <label>Analysis Tone & Style</label>
                        <div class="tone-selection">
                            <div class="tone-grid-row">
                                <div class="tone-card" data-tone="concise">
                                    <div class="tone-title">🎯 Concise</div>
                                    <div class="tone-description">Brief, to-the-point analysis with key insights only</div>
                                </div>
                                <div class="tone-card active" data-tone="professional">
                                    <div class="tone-title">💼 Professional</div>
                                    <div class="tone-description">Formal business language suitable for executive reports</div>
                                </div>
                                <div class="tone-card" data-tone="conversational">
                                    <div class="tone-title">💬 Conversational</div>
                                    <div class="tone-description">Friendly, approachable tone for team discussions</div>
                                </div>
                            </div>
                            <div class="tone-grid-row">
                                <div class="tone-card" data-tone="encouraging">
                                    <div class="tone-title">📈 Encouraging</div>
                                    <div class="tone-description">Positive, motivational language highlighting opportunities</div>
                                </div>
                                <div class="tone-card" data-tone="analytical">
                                    <div class="tone-title">📊 Analytical</div>
                                    <div class="tone-description">Data-driven insights with detailed metrics and benchmarks</div>
                                </div>
                                <div class="tone-card" data-tone="casual">
                                    <div class="tone-title">👤 Casual</div>
                                    <div class="tone-description">Relaxed, informal tone for internal team use</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Additional AI Instructions -->
                    <div class="form-field">
                        <label for="custom-instructions">Additional AI Instructions</label>
                        <textarea id="custom-instructions" class="styled-textarea" rows="4" 
                            placeholder="Add specific instructions for the AI analysis. For example: Focus on conversion metrics, compare against Q3 benchmarks, highlight mobile performance..."></textarea>
                        <div class="char-counter" id="char-counter">0 / 500 characters</div>
                    </div>
                    
                    <!-- Configuration Summary -->
                    <div class="config-summary">
                        <div class="summary-title">Current Configuration</div>
                        <div class="config-row">
                            <span class="config-label">Model:</span>
                            <span class="config-value" id="summary-model">Claude Sonnet 4</span>
                        </div>
                        <div class="config-row">
                            <span class="config-label">Temperature:</span>
                            <span class="config-value" id="summary-temp">0.5 - Balanced</span>
                        </div>
                        <div class="config-row">
                            <span class="config-label">Tone:</span>
                            <span class="config-value" id="summary-tone">Professional</span>
                        </div>
                        <div class="config-row">
                            <span class="config-label">Custom Instructions:</span>
                            <span class="config-value" id="summary-instructions">None</span>
                        </div>
                    </div>
                </div>
                
                <div class="section-actions">
                    <button type="button" class="generate-btn secondary" id="back-to-performance">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="m15 18-6-6 6-6"></path>
                        </svg>
                        Back
                    </button>
                    <button type="button" class="generate-btn large-btn" id="generate-analysis">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M4.5 16.5c-1.5 1.5-1.5 4.5 0 6s4.5 1.5 6 0l1-1-6-6-1 1z"></path>
                            <path d="M13.5 6.5a4.5 4.5 0 0 1 6 6L7 25l-7-7 12.5-12.5z"></path>
                        </svg>
                        Generate AI Analysis
                    </button>
                </div>
                
                <div class="analysis-loading hidden" id="analysis-loading">
                    <div class="loading-animation">
                        <div class="spinner large"></div>
                        <p>Analyzing your campaign data...</p>
                        <p class="loading-substatus">This may take 30-60 seconds</p>
                    </div>
                </div>
                </div>
            </section>

            <!-- Analysis Results -->
            <section class="analysis-results-container hidden" id="analysis-results">
                <!-- Analysis Report Card -->
                <div class="analysis-report-card">
                    <div class="report-header">
                        <div class="report-title-section">
                            <h1 class="report-title">Campaign Performance Analysis</h1>
                            <div class="report-metadata">
                                <span class="metadata-item" id="report-company">--</span>
                                <span class="metadata-separator">•</span>
                                <span class="metadata-item" id="report-date-range">--</span>
                                <span class="metadata-separator">•</span>
                                <span class="metadata-item" id="report-generated-date">--</span>
                            </div>
                        </div>
                        <div class="report-actions">
                            <button type="button" class="action-btn export-btn" id="export-report">
                                <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                    <polyline points="7 10 12 15 17 10"></polyline>
                                    <line x1="12" y1="15" x2="12" y2="3"></line>
                                </svg>
                                <span>Export</span>
                            </button>
                            <button type="button" class="action-btn copy-btn" id="copy-report">
                                <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                </svg>
                                <span>Copy</span>
                            </button>
                            <button type="button" class="action-btn new-analysis-btn" id="start-new-analysis">
                                <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="1 4 1 10 7 10"></polyline>
                                    <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>
                                </svg>
                                <span>New Analysis</span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Table of Contents -->
                    <div class="report-toc">
                        <nav class="toc-nav" id="report-toc">
                            <!-- Dynamically populated -->
                        </nav>
                    </div>

                    <!-- Analysis Content -->
                    <div class="analysis-content" id="analysis-output">
                        <!-- AI-generated analysis will be populated here -->
                    </div>
                </div>
            </section>
        </main>
        
        <!-- Footer -->
        <footer class="app-footer">
            <div class="footer-content">
                <div class="footer-links">
                    <a href="/report-ai/schema-admin/" class="footer-link">
                        <svg class="footer-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
                            <path d="M2 17l10 5 10-5"></path>
                            <path d="M2 12l10 5 10-5"></path>
                        </svg>
                        Schema Admin
                    </a>
                    <span class="footer-separator">|</span>
                    <a href="/report-ai/" class="footer-link">
                        <svg class="footer-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14 2 14 8 20 8"></polyline>
                            <line x1="16" y1="13" x2="8" y2="13"></line>
                            <line x1="16" y1="17" x2="8" y2="17"></line>
                            <polyline points="10 9 9 9 8 9"></polyline>
                        </svg>
                        Documentation
                    </a>
                </div>
                <div class="footer-copyright">
                    © 2025 Report.AI
                </div>
            </div>
        </footer>
    </div>

    <!-- Error Modal -->
    <div class="modal hidden" id="error-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Error</h3>
                <button type="button" class="modal-close" id="close-error-modal">×</button>
            </div>
            <div class="modal-body">
                <p id="error-message">An error occurred.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="generate-btn secondary" id="dismiss-error">OK</button>
            </div>
        </div>
    </div>

    <!-- New Analysis Modal -->
    <div class="modal hidden" id="new-analysis-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Start New Analysis</h3>
                <button type="button" class="modal-close" id="close-new-analysis-modal">×</button>
            </div>
            <div class="modal-body">
                <p>Would you like to start a new analysis with the same campaign data, or clear everything and start over?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="generate-btn secondary" id="same-data-analysis">Same Data</button>
                <button type="button" class="generate-btn primary" id="clear-start-over">Clear & Start Over</button>
            </div>
        </div>
    </div>

    <!-- Export Modal -->
    <div class="modal hidden" id="export-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Export Analysis Report</h3>
                <button type="button" class="modal-close" id="close-export-modal">×</button>
            </div>
            <div class="modal-body">
                <p>Choose your preferred export format:</p>
                <div class="export-options">
                    <button type="button" class="export-option-btn" data-format="pdf">
                        <svg class="export-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14,2 14,8 20,8"></polyline>
                            <line x1="16" y1="13" x2="8" y2="13"></line>
                            <line x1="16" y1="17" x2="8" y2="17"></line>
                            <polyline points="10,9 9,9 8,9"></polyline>
                        </svg>
                        <span>PDF Document</span>
                    </button>
                    <button type="button" class="export-option-btn" data-format="docx">
                        <svg class="export-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14,2 14,8 20,8"></polyline>
                            <line x1="16" y1="13" x2="8" y2="13"></line>
                            <line x1="16" y1="17" x2="8" y2="17"></line>
                            <line x1="12" y1="9" x2="8" y2="13"></line>
                            <line x1="8" y1="9" x2="12" y2="13"></line>
                        </svg>
                        <span>Word Document</span>
                    </button>
                    <button type="button" class="export-option-btn" data-format="md">
                        <svg class="export-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14,2 14,8 20,8"></polyline>
                            <path d="M8 13h2l2-4 2 4h2"></path>
                        </svg>
                        <span>Markdown File</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Tactic Detail Modal -->
    <div class="modal hidden" id="tactic-detail-modal">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h3 id="tactic-modal-title">Tactic Details</h3>
                <button type="button" class="modal-close" id="close-tactic-modal">×</button>
            </div>
            <div class="modal-body">
                <div class="tactic-modal-info">
                    <div class="tactic-modal-summary">
                        <h4 id="tactic-modal-platform">Platform</h4>
                        <p id="tactic-modal-description">Description</p>
                    </div>
                </div>
                
                <div class="line-items-section">
                    <div class="section-header-inline">
                        <h4>Line Items</h4>
                        <div class="line-item-actions">
                            <span class="removed-count hidden" id="removed-count">
                                <span class="removed-label">Removed:</span>
                                <span class="removed-number">0</span>
                            </span>
                            <button type="button" class="restore-btn hidden" id="restore-all-btn">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path>
                                    <path d="M3 3v5h5"></path>
                                </svg>
                                Restore All
                            </button>
                        </div>
                    </div>
                    
                    <div class="line-items-grid" id="modal-line-items">
                        <!-- Line items will be populated here -->
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="generate-btn secondary" id="close-tactic-detail">Close</button>
            </div>
        </div>
    </div>

    <!-- Research Context Modal -->
    <div class="modal hidden" id="research-context-modal">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h3>Market Research Context</h3>
                <button type="button" class="modal-close" id="close-research-modal">×</button>
            </div>
            <div class="modal-body">
                <div class="research-context-container">
                    <div class="research-sections" id="research-sections">
                        <!-- Dynamically populated research sections -->
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="generate-btn secondary" id="clear-research-context">Clear All Context</button>
                <button type="button" class="generate-btn" id="save-research-context">Save Changes</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>